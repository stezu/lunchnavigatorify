jQuery(function(e){function t(e){var t="<table class='restaurant-result'><tr>";return void 0!==e.image_url&&(t+="<td class='restaurant-image'><img src='"+e.image_url+"'/></td>"),t+="<td class='restaurant-info'><div class='restaurant-name'>"+e.name+"</div>",void 0!==e.location.display_address&&(t+="<div class='restaurant-address'>"+e.location.display_address+"</div>"),void 0!==e.rating&&(t+="<div class='restaurant-rating'>Rating: "+e.rating+"</div>"),t+="</td></tr></table>"}function s(e){return e.name}var a=e(document),n=e(".yelp-search"),r=e(".results");n.find(".yelp-search__field--text").select2({multiple:!0,maximumSelectionSize:1,minimumInputLength:2,ajax:{url:"/search",quietMillis:150,data:function(e){return{restaurant:e,page_limit:10}},results:function(e){return{results:e.businesses}}},formatResult:t,formatSelection:s,dropdownCssClass:"bigdrop",escapeMarkup:function(e){return e}}).change(function(){var t=e(this);e(".select2-search-choice").css("display","none"),t.val(e(".select2-search-choice").text()),e(".select2-search-field input").val(e(".select2-search-choice").text()),e(".select2-search-choice").remove()}).on("select2-close",function(){console.log("closing box"),e(".select2-search-field input").blur()}).end().submit(function(){var t=n.find(".yelp-search__field--text").select2("data");return(null!==t||t.length)&&e.ajax({data:t,type:"post",success:function(e){r.html(e)}}),!1}),a.on("click touchend",".results__list__item__delete",function(){return e.ajax({data:{id:e(this).data("id")},type:"delete",success:function(e){console.log(e),r.html(e)}}),!1}),a.on("click touchend",".page-header__random",function(){var t=r.find(".results__list__item").removeClass("selected"),s=e(t[Math.floor(Math.random()*t.length)]);return s.addClass("selected"),!1})});