!function(t,e){"use strict";var n={$app:t(".app"),init:function(){e.init()},updateUserList:function(e){var n=t(".current-users");n.empty();for(var i=0,a=e.length;a>i;i++)n.append("<li>"+e[i].name+"</li>")}};window.chat=n}(jQuery,window.socketio),function(t,e,n){"use strict";var i={init:function(){n.init()}};window.group=i}(jQuery,window.socketio,window.chat),jQuery(function(t){var e=t(document),n=t(".org-form"),i=t(".yelp-search"),a=t(".results");t(".add-org").on("click",function(e){e.preventDefault(),navigator.geolocation.getCurrentPosition(function(e){t.ajax({type:"get",url:"/location/"+e.coords.latitude+"/"+e.coords.longitude,success:function(e){t('input[name="zip"]').val(e.zip_code)}})}),n.slideDown()}),n.on("submit",function(e){e.preventDefault(),t.ajax({type:this.method,url:this.action,data:{orgName:e.currentTarget[1].value,url:e.currentTarget[2].value,zip:e.currentTarget[3].value},success:function(e){t(".organization").html(e)}}),t(this).hide()}),i.find(".yelp-search__field--text").select2({minimumInputLength:2,ajax:{url:"/search",quietMillis:150,data:function(e){return{restaurant:e,location:t(".zip").text(),page_limit:10}},results:function(t){return{results:t.businesses}}},formatResult:function(t){var e='<div class="restaurant">';return void 0!==t.image_url&&(e+='<img class="restaurant__image" src="'+t.image_url+'">'),e+='<div class="restaurant__info"><h3 class="restaurant__name">'+t.name+"</div>",void 0!==t.location.display_address&&(e+='<div class="restaurant__address">'+t.location.display_address+"</div>"),void 0!==t.rating&&(e+='<div class="restaurant__rating">Rating: '+t.rating+"</div>"),e+="</div>"},formatSelection:function(t){return t.name},dropdownCssClass:"bigdrop",escapeMarkup:function(t){return t}}).end().submit(function(){var e=i.find(".yelp-search__field--text").select2("data");return(null!==e||e.length)&&t.ajax({data:e,type:"post",success:function(t){a.html(t)}}),!1}),e.on("click touchend",".results__list__item__delete",function(){return t.ajax({data:{id:t(this).data("id")},type:"delete",success:function(t){console.log(t),a.html(t)}}),!1}),e.on("click touchend",".page-header__random",function(){var e=a.find(".results__list__item").removeClass("selected");return t(e[Math.floor(Math.random()*e.length)]).addClass("selected"),!1})}),function(t){"use strict";var e={init:function(){var e=io.connect("http://localhost");e.on("users updated",function(e){t.updateUserList(e)})}};window.socketio=e}(window.chat);