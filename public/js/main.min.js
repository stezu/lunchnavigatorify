jQuery(function(t){function e(t){var e="<table class='restaurant-result'><tr>";return void 0!==t.image_url&&(e+="<td class='restaurant-image'><img src='"+t.image_url+"'/></td>"),e+="<td class='restaurant-info'><div class='restaurant-name'>"+t.name+"</div>",void 0!==t.location.display_address&&(e+="<div class='restaurant-address'>"+t.location.display_address+"</div>"),void 0!==t.rating&&(e+="<div class='restaurant-rating'>Rating: "+t.rating+"</div>"),e+="</td></tr></table>"}function a(t){return t.name}var s=t(document),n=t(".yelp-search"),r=t(".results");n.find(".yelp-search__field--text").select2({minimumInputLength:2,ajax:{url:"/search",quietMillis:150,data:function(e){return{restaurant:e,location:t(".zip").text(),page_limit:10}},results:function(t){return{results:t.businesses}}},formatResult:e,formatSelection:a,dropdownCssClass:"bigdrop",escapeMarkup:function(t){return t}}).end().submit(function(){var e=n.find(".yelp-search__field--text").select2("data");return(null!==e||e.length)&&t.ajax({data:e,type:"post",success:function(t){r.html(t)}}),!1}),s.on("click touchend",".results__list__item__delete",function(){return t.ajax({data:{id:t(this).data("id")},type:"delete",success:function(t){console.log(t),r.html(t)}}),!1}),s.on("click touchend",".page-header__random",function(){var e=r.find(".results__list__item").removeClass("selected");return t(e[Math.floor(Math.random()*e.length)]).addClass("selected"),!1})});